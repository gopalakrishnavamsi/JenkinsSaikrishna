library 'docusign-common'

def installTasks = [
  'Install JS Dependencies': {
    nodejsInstall([
      commitStatusContext: 'Install JS Dependencies',
      nodejsInstallMethod: 'npm'
    ])
  }
]

def defaultSalesforceArgs = [
  versionNumber: '2.5',
  nightlyJwtKeyFileCredsId: 'salesforce-nightly-jwt-key-file',
  nightlyConsumerKeyCredsId: 'salesforce-nightly-jwt-consumer-key',
  packagingOrgUsername: 'vineet.puranik+dfsle@docusign.com',
  orgAlias: 'PackagingOrg',
  packageId: '0336A000000R2HG',
  packageName: '\"DocuSign Apps Launcher\"'
]



salesforceNightlyBuildPipeline(
  appName: 'salesforce-dal-nightly-build',
  firstStageInitTask:{
  sh """  sudo apt-get update
          sudo apt install xmlstarlet -y
        """.stripIndent()},
  installTasks: installTasks,
  salesforceArgs: defaultSalesforceArgs,
  doSonarQube: false,
  slack: [
    channel: 'eng-pipe-dfs-all'
  ]
)
