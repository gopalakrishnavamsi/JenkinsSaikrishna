<template>
    <div class="ds-sending">
        <template if:true={isLoading}>
            <div class="ds-sending-tagger slds-is-absolute slds-text-align_center">
                {taggerLoadingMessage}
            </div>
            <lightning-spinner
                    size="medium"
                    variant="brand">
            </lightning-spinner>
        </template>
        <c-sending-header
                is-first-step={isFirstStep}
                is-final-step={isFinalStep}
                next-step-button-text={nextStepButtonText}
                onclickprogressstep={handleOnClickProgressStep}
                onexitworkflow={handleExitWorkflow}
                disable-all-buttons={isEmptyRecipients}>
        </c-sending-header>
        <div class="slds-m-top_large slds-m-bottom_xx-large ds-sending-margin">
            <c-progress-bar
                    current-step={currentStep}
                    steps={steps}
                    onclickprogressstep={handleOnClickProgressStep}
                    disable-steps={isEmptyRecipients}>
            </c-progress-bar>
            <c-sending-documents
                    if:true={documentsStep}
                    record-id={recordId}
                    envelope-id={envelope.id}
                    documents={documents}
                    forbid-envelope-changes={forbidEnvelopeChanges}>
            </c-sending-documents>
            <c-recipients-config
                    if:true={recipientsStep}
                    is-sending
                    read-only={forbidEnvelopeChanges}
                    recipients={recipients}
                    default-roles={defaultRoles}
                    onemptyrecipients={handleEmptyRecipient}>
            </c-recipients-config>
            <c-dec-recipient-message
                    if:true={showEmailMessage}
                    email-subject={emailSubject}
                    email-message={emailMessage}
                    onemailchange={handleEmailChange}>
            </c-dec-recipient-message>
            <c-sending-recipient-more-options
                    if:true={recipientsStep}
                    notifications={notifications}
                    envelope={envelope}>
            </c-sending-recipient-more-options>
        </div>
    </div>
</template>