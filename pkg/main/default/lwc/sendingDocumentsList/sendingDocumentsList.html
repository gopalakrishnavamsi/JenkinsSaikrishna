<template>
    <lightning-spinner if:true={isLoading}
                       alternative-text="Loading"
                       size="medium"
                       variant="brand">
    </lightning-spinner>
    <c-select-files-modal soure-record-id={recordId}
                          onsuccess={addUploadedDocument}>
    </c-select-files-modal>
    <div class="ds-addDocuments-details-section">
        <div class="ds-addDocuments-details-header slds-p-around_medium">
            <div class="slds-grid slds-grid_align-spread">
                <div class="slds-col">
                    <div class="ds-addDocuments-details-header-text">{selectedDocumentsHeader}</div>
                </div>
                <template if:false={forbidEnvelopeChanges}>
                    <div class="slds-col">
                        <lightning-button
                                label={label.addFromSalesforce}
                                onclick={handleAddFromSalesforce}>
                        </lightning-button>
                        <c-file-upload
                                record-id={recordId}
                                onsuccess={addUploadedDocument}
                                file-upload-label={label.upload}>
                        </c-file-upload>
                    </div>
                </template>
            </div>
        </div>
        <table>
            <tr>
                <th class="slds-grid ds-sending-table-header">
                    <div class="slds-col slds-size_1-of-12 ds-sending-fit-content-width">
                        <lightning-input
                                type="checkbox"
                                disabled={forbidEnvelopeChanges}
                                checked={allDocumentsSelected}
                                onchange={toggleAllDocuments}>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-12 ds-sending-header-text ds-sending-fit-content-width">
                        {label.documents}
                    </div>
                </th>
            </tr>
        </table>
        <template
                for:each={documents}
                for:item="document"
                for:index="index">
            <template if:false={document.isEmptyTemplate}>
                <div class="slds-border_bottom slds-p-around_small"
                     key={document.sourceId}>
                    <c-sending-document
                            document={document}
                            index={index}
                            forbid-envelope-changes={forbidEnvelopeChanges}>
                    </c-sending-document>
                </div>
            </template>
        </template>
    </div>
</template>
